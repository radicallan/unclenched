<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Mini Habbo Room</title>
  <style>
    body {
      margin: 0;
      background: #222;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    canvas {
      background: #3c2f2f;
      border: 4px solid #fff;
      image-rendering: pixelated;
    }
  </style>
</head>
<body>
  <canvas id="game" width="800" height="600"></canvas>

  <script>
    const canvas = document.getElementById("game");
    const ctx = canvas.getContext("2d");

    // grid size
    const tileW = 64;
    const tileH = 32;

    // room grid (10x10 tiles)
    const mapW = 10, mapH = 10;

    // simple isometric floor
    function drawTile(x, y, color="#6c4") {
      const screenX = (x - y) * (tileW/2) + canvas.width/2;
      const screenY = (x + y) * (tileH/2) + 50;
      ctx.beginPath();
      ctx.moveTo(screenX, screenY);
      ctx.lineTo(screenX + tileW/2, screenY + tileH/2);
      ctx.lineTo(screenX, screenY + tileH);
      ctx.lineTo(screenX - tileW/2, screenY + tileH/2);
      ctx.closePath();
      ctx.fillStyle = color;
      ctx.fill();
      ctx.strokeStyle = "#333";
      ctx.stroke();
    }

    // character
    let player = {x: 5, y: 5};

    function drawPlayer() {
      const screenX = (player.x - player.y) * (tileW/2) + canvas.width/2;
      const screenY = (player.x + player.y) * (tileH/2) + 50;
      ctx.fillStyle = "blue";
      ctx.beginPath();
      ctx.arc(screenX, screenY - 10, 12, 0, Math.PI * 2);
      ctx.fill();
    }

    // draw loop
    function draw() {
      ctx.clearRect(0,0,canvas.width,canvas.height);
      for(let y=0;y<mapH;y++){
        for(let x=0;x<mapW;x++){
          drawTile(x,y);
        }
      }
      drawPlayer();
    }

    draw();

    // movement with arrow keys
    window.addEventListener("keydown", e => {
      if(e.key==="ArrowUp" || e.key==="w") player.y--;
      if(e.key==="ArrowDown" || e.key==="s") player.y++;
      if(e.key==="ArrowLeft" || e.key==="a") player.x--;
      if(e.key==="ArrowRight" || e.key==="d") player.x++;
      // keep inside room
      player.x = Math.max(0, Math.min(mapW-1, player.x));
      player.y = Math.max(0, Math.min(mapH-1, player.y));
      draw();
    });

    // click-to-move
    canvas.addEventListener("click", e=>{
      // quick crude mapping: loop tiles, find closest
      let bestDist = 9999, bestTile=null;
      for(let y=0;y<mapH;y++){
        for(let x=0;x<mapW;x++){
          const screenX = (x - y) * (tileW/2) + canvas.width/2;
          const screenY = (x + y) * (tileH/2) + 50;
          const dx = e.offsetX - screenX;
          const dy = e.offsetY - (screenY+tileH/2);
          const dist = Math.sqrt(dx*dx+dy*dy);
          if(dist < bestDist){
            bestDist=dist; bestTile={x,y};
          }
        }
      }
      if(bestTile){ player.x=bestTile.x; player.y=bestTile.y; draw(); }
    });
  </script>
</body>
</html>

